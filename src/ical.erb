---
layout: false
permalink: /ical
collection: events
template_engine: erb
---
<% require 'icalendar' %>
<% cal = Icalendar::Calendar.new %>
<% site.collections.events.docs.each do |event| %>
  <%
  ical_event = Icalendar::Event.new
  ical_event.uid = event[:slug]
  ical_event.dtstart = event[:datetime].to_datetime
  ical_event.dtend = event[:datetime].to_datetime + 1.hour
  ical_event.summary = event[:title]
  ical_event.url = event[:external_url]
  cal.add_event(ical_event)
  %>
<% end %>

<%= cal.to_ical %>
